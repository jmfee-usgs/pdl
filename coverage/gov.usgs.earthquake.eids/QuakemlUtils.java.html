<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>QuakemlUtils.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">pdl</a> &gt; <a href="index.source.html" class="el_package">gov.usgs.earthquake.eids</a> &gt; <span class="el_source">QuakemlUtils.java</span></div><h1>QuakemlUtils.java</h1><pre class="source lang-java linenums">package gov.usgs.earthquake.eids;

import java.math.BigDecimal;
import java.math.BigInteger;
import java.util.Date;
import java.util.Iterator;
import java.util.List;

import org.quakeml_1_2.CreationInfo;
import org.quakeml_1_2.Event;
import org.quakeml_1_2.IntegerQuantity;
import org.quakeml_1_2.Magnitude;
import org.quakeml_1_2.MomentTensor;
import org.quakeml_1_2.Origin;
import org.quakeml_1_2.Quakeml;
import org.quakeml_1_2.RealQuantity;
import org.quakeml_1_2.TimeQuantity;
import org.quakeml_1_2.FocalMechanism;
import org.quakeml_1_2.EventParameters;

<span class="nc" id="L21">public class QuakemlUtils {</span>

	/**
	 * Find the preferred Origin in an Event.
	 * 
	 * @param event
	 * @return Origin with publicID equal to event.getPreferredOriginID(), or
	 *         null if not found.
	 */
	public static Origin getPreferredOrigin(final Event event) {
<span class="fc" id="L31">		return getOrigin(event, event.getPreferredOriginID());</span>
	}

	/**
	 * Find a specific Origin in an Event.
	 * 
	 * @param event
	 *            event to search
	 * @param id
	 *            publicID to find
	 * @return Origin with publicID equal to id, or null if not found.
	 */
	public static Origin getOrigin(final Event event, final String id) {
<span class="fc bfc" id="L44" title="All 2 branches covered.">		if (id != null) {</span>
<span class="fc" id="L45">			Iterator&lt;Origin&gt; iter = event.getOrigins().iterator();</span>
<span class="pc bpc" id="L46" title="1 of 2 branches missed.">			while (iter.hasNext()) {</span>
<span class="fc" id="L47">				Origin next = iter.next();</span>
<span class="fc" id="L48">				String originId = next.getPublicID();</span>
<span class="pc bpc" id="L49" title="1 of 4 branches missed.">				if (originId != null &amp;&amp; originId.equals(id)) {</span>
<span class="fc" id="L50">					return next;</span>
				}
<span class="fc" id="L52">			}</span>
		}
<span class="fc" id="L54">		return null;</span>
	}

	/**
	 * Find the preferred Magnitude in an Event.
	 * 
	 * @param event
	 *            event to search
	 * @return Magnitude with publicID equal to event.getPreferredMagnitudeID(),
	 *         or null if not found.
	 */
	public static Magnitude getPreferredMagnitude(final Event event) {
<span class="fc" id="L66">		return getMagnitude(event, event.getPreferredMagnitudeID());</span>
	}

	/**
	 * Find a specific Magnitude in an event.
	 * 
	 * @param event
	 *            event to search
	 * @param id
	 *            publicID to find.
	 * @return Magnitude with publicID equal to id, or null if not found.
	 */
	public static Magnitude getMagnitude(final Event event, final String id) {
<span class="fc bfc" id="L79" title="All 2 branches covered.">		if (id != null) {</span>
<span class="fc" id="L80">			Iterator&lt;Magnitude&gt; iter = event.getMagnitudes().iterator();</span>
<span class="pc bpc" id="L81" title="1 of 2 branches missed.">			while (iter.hasNext()) {</span>
<span class="fc" id="L82">				Magnitude next = iter.next();</span>
<span class="fc" id="L83">				String magnitudeId = next.getPublicID();</span>
<span class="pc bpc" id="L84" title="2 of 4 branches missed.">				if (magnitudeId != null &amp;&amp; magnitudeId.equals(id)) {</span>
<span class="fc" id="L85">					return next;</span>
				}
<span class="nc" id="L87">			}</span>
		}
<span class="fc" id="L89">		return null;</span>
	}

	/**
	 * Find a specific FocalMechanism in an event.
	 * 
	 * @param event
	 *            event to search
	 * @param id
	 *            publicID to find.
	 * @return FocalMechanism with publicID equal to id, or null if not found.
	 */
	public static FocalMechanism getFocalMechanism(final Event event,
			final String id) {
<span class="nc bnc" id="L103" title="All 2 branches missed.">		if (id != null) {</span>
<span class="nc" id="L104">			Iterator&lt;FocalMechanism&gt; iter = event.getFocalMechanisms()</span>
<span class="nc" id="L105">					.iterator();</span>
<span class="nc bnc" id="L106" title="All 2 branches missed.">			while (iter.hasNext()) {</span>
<span class="nc" id="L107">				FocalMechanism next = iter.next();</span>
<span class="nc" id="L108">				String mechId = next.getPublicID();</span>
<span class="nc bnc" id="L109" title="All 4 branches missed.">				if (mechId != null &amp;&amp; mechId.equals(id)) {</span>
<span class="nc" id="L110">					return next;</span>
				}
<span class="nc" id="L112">			}</span>
		}
<span class="nc" id="L114">		return null;</span>
	}

	/**
	 * Flatten multiple creation info objects, but using the most specific (at
	 * end of list) value that is not null.
	 * 
	 * @param infos
	 * @return a CreationInfo object with the most specific properties (later in
	 *         arguments list), which may be null.
	 */
	public static CreationInfo getCreationInfo(final CreationInfo... infos) {
<span class="nc" id="L126">		CreationInfo info = new CreationInfo();</span>

<span class="nc bnc" id="L128" title="All 2 branches missed.">		for (int i = 0, len = infos.length; i &lt; len; i++) {</span>
<span class="nc" id="L129">			CreationInfo next = infos[i];</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">			if (next == null) {</span>
<span class="nc" id="L131">				continue;</span>
			}

<span class="nc bnc" id="L134" title="All 2 branches missed.">			if (next.getAgencyID() != null) {</span>
				// set agencyid and agency uri at same time
<span class="nc" id="L136">				info.setAgencyID(next.getAgencyID());</span>
<span class="nc" id="L137">				info.setAgencyURI(next.getAgencyURI());</span>
			}

<span class="nc bnc" id="L140" title="All 2 branches missed.">			if (next.getAuthor() != null) {</span>
				// author and author uri at same time
<span class="nc" id="L142">				info.setAuthor(next.getAuthor());</span>
<span class="nc" id="L143">				info.setAuthorURI(next.getAuthorURI());</span>
			}

<span class="nc bnc" id="L146" title="All 2 branches missed.">			if (next.getCreationTime() != null) {</span>
<span class="nc" id="L147">				info.setCreationTime(next.getCreationTime());</span>
			}

<span class="nc bnc" id="L150" title="All 2 branches missed.">			if (next.getVersion() != null) {</span>
<span class="nc" id="L151">				info.setVersion(next.getVersion());</span>
			}
		}

<span class="nc" id="L155">		return info;</span>
	}

	/**
	 * @param value
	 * @return value.getValue(), or null if value == null.
	 */
	public static BigDecimal getValue(final RealQuantity value) {
<span class="pc bpc" id="L163" title="1 of 2 branches missed.">		if (value == null) {</span>
<span class="nc" id="L164">			return null;</span>
		} else {
<span class="fc" id="L166">			return value.getValue();</span>
		}
	}

	/**
	 * @param value
	 * @return value.getValue(), or null if value == null.
	 */
	public static BigInteger getValue(final IntegerQuantity value) {
<span class="nc bnc" id="L175" title="All 2 branches missed.">		if (value == null) {</span>
<span class="nc" id="L176">			return null;</span>
		} else {
<span class="nc" id="L178">			return value.getValue();</span>
		}
	}

	/**
	 * @param value
	 * @return value.getValue(), or null if value == null.
	 */
	public static Date getValue(final TimeQuantity value) {
<span class="nc bnc" id="L187" title="All 2 branches missed.">		if (value == null) {</span>
<span class="nc" id="L188">			return null;</span>
		} else {
<span class="nc" id="L190">			return value.getValue();</span>
		}
	}

	public static String getMagnitudeType(final String magnitudeType) {
<span class="pc bpc" id="L195" title="1 of 2 branches missed.">		if (magnitudeType == null) {</span>
<span class="nc" id="L196">			return null;</span>
		}

<span class="fc" id="L199">		return magnitudeType.toLowerCase();</span>
	}

	/**
	 * @return true if list is not null and not empty.
	 */
	private static boolean listHasData(final List&lt;?&gt; list) {
<span class="pc bpc" id="L206" title="1 of 4 branches missed.">		if (list != null &amp;&amp; list.size() &gt; 0) {</span>
<span class="fc" id="L207">			return true;</span>
		}
<span class="fc" id="L209">		return false;</span>
	}

	/**
	 * Clear a list if it is not null and not empty.
	 */
	private static void listRemoveData(final List&lt;?&gt; list) {
<span class="nc bnc" id="L216" title="All 4 branches missed.">		if (list != null &amp;&amp; list.size() &gt; 0) {</span>
<span class="nc" id="L217">			list.clear();</span>
		}
<span class="nc" id="L219">	}</span>

	/**
	 * Check if an event has phase data.
	 * 
	 * &lt;ul&gt;
	 * &lt;li&gt;event.getPicks()&lt;/li&gt;
	 * &lt;li&gt;event.getAmplitudes()&lt;/li&gt;
	 * &lt;li&gt;event.getStationMagnitudes()&lt;/li&gt;
	 * &lt;li&gt;event.getOrigins()&lt;/li&gt;
	 * &lt;ul&gt;
	 * &lt;li&gt;origin.getArrivals()&lt;/li&gt;
	 * &lt;/ul&gt;
	 * &lt;/li&gt; &lt;li&gt;event.getMagnitudes()
	 * &lt;ul&gt;
	 * &lt;li&gt;magnitude.getStationMagnitudeContributions()&lt;/li&gt;
	 * &lt;/ul&gt;
	 * &lt;/li&gt; &lt;/ul&gt;
	 * 
	 * @param event
	 *            event to search.
	 * @return true if phase data found, false otherwise.
	 */
	public static boolean hasPhaseData(final Event event) {
		// event level phase data
<span class="pc bpc" id="L244" title="1 of 4 branches missed.">		if (listHasData(event.getPicks()) || listHasData(event.getAmplitudes())</span>
<span class="pc bpc" id="L245" title="1 of 2 branches missed.">				|| listHasData(event.getStationMagnitudes())) {</span>
<span class="fc" id="L246">			return true;</span>
		}

		// origin level phase data
<span class="pc bpc" id="L250" title="1 of 2 branches missed.">		if (event.getOrigins() != null) {</span>
<span class="fc" id="L251">			Iterator&lt;Origin&gt; iter = event.getOrigins().iterator();</span>
<span class="fc bfc" id="L252" title="All 2 branches covered.">			while (iter.hasNext()) {</span>
<span class="fc" id="L253">				Origin next = iter.next();</span>
<span class="pc bpc" id="L254" title="1 of 2 branches missed.">				if (listHasData(next.getArrivals())) {</span>
<span class="nc" id="L255">					return true;</span>
				}
<span class="fc" id="L257">			}</span>
		}

		// magnitude level phase data
<span class="pc bpc" id="L261" title="1 of 2 branches missed.">		if (event.getMagnitudes() != null) {</span>
<span class="fc" id="L262">			Iterator&lt;Magnitude&gt; iter = event.getMagnitudes().iterator();</span>
<span class="fc bfc" id="L263" title="All 2 branches covered.">			while (iter.hasNext()) {</span>
<span class="fc" id="L264">				Magnitude next = iter.next();</span>
<span class="pc bpc" id="L265" title="1 of 2 branches missed.">				if (listHasData(next.getStationMagnitudeContributions())) {</span>
<span class="nc" id="L266">					return true;</span>
				}
<span class="fc" id="L268">			}</span>
		}

		// haven't found phase data
<span class="fc" id="L272">		return false;</span>
	}

	/**
	 * Similar to {@link #hasPhaseData(Event)}, but empties any lists that have
	 * phase data. Also removes &amp;lt;waveformID&amp;gt; elements from focalMechanism.
	 * 
	 * @param event
	 *            event to clear.
	 */
	public static void removePhaseData(final Event event) {
		// event level phase data
<span class="nc" id="L284">		listRemoveData(event.getPicks());</span>
<span class="nc" id="L285">		listRemoveData(event.getAmplitudes());</span>
<span class="nc" id="L286">		listRemoveData(event.getStationMagnitudes());</span>

		// origin level phase data
<span class="nc bnc" id="L289" title="All 2 branches missed.">		if (event.getOrigins() != null) {</span>
<span class="nc" id="L290">			Iterator&lt;Origin&gt; iter = event.getOrigins().iterator();</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">			while (iter.hasNext()) {</span>
<span class="nc" id="L292">				Origin next = iter.next();</span>
<span class="nc" id="L293">				listRemoveData(next.getArrivals());</span>
<span class="nc" id="L294">			}</span>
		}

		// magnitude level phase data
<span class="nc bnc" id="L298" title="All 2 branches missed.">		if (event.getMagnitudes() != null) {</span>
<span class="nc" id="L299">			Iterator&lt;Magnitude&gt; iter = event.getMagnitudes().iterator();</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">			while (iter.hasNext()) {</span>
<span class="nc" id="L301">				Magnitude next = iter.next();</span>
<span class="nc" id="L302">				listRemoveData(next.getStationMagnitudeContributions());</span>
<span class="nc" id="L303">			}</span>
		}

		// additionally, remove waveformIDs from focal mechanisms
<span class="nc bnc" id="L307" title="All 2 branches missed.">		if (event.getFocalMechanisms() != null) {</span>
<span class="nc" id="L308">			Iterator&lt;FocalMechanism&gt; iter = event.getFocalMechanisms()</span>
<span class="nc" id="L309">					.iterator();</span>
<span class="nc bnc" id="L310" title="All 2 branches missed.">			while (iter.hasNext()) {</span>
<span class="nc" id="L311">				FocalMechanism next = iter.next();</span>
<span class="nc" id="L312">				listRemoveData(next.getWaveformIDs());</span>
<span class="nc" id="L313">			}</span>
		}
<span class="nc" id="L315">	}</span>

	/**
	 * Extract the preferred origin and magnitude from the first event in a
	 * quakeml message.
	 * 
	 * @param q
	 *            the quakeml message with a preferred origin.
	 * @return a new Quakeml object.
	 */
	public static Quakeml getLightweightOrigin(final Quakeml q) {
<span class="fc" id="L326">		Quakeml quakeml = new Quakeml();</span>

<span class="fc" id="L328">		EventParameters oldEventParameters = q.getEventParameters();</span>
<span class="fc" id="L329">		EventParameters eventParameters = shallowClone(oldEventParameters);</span>
<span class="fc" id="L330">		quakeml.setEventParameters(eventParameters);</span>

<span class="fc" id="L332">		Event oldEvent = q.getEventParameters().getEvents().get(0);</span>
<span class="fc" id="L333">		Event event = shallowClone(oldEvent);</span>
<span class="fc" id="L334">		eventParameters.getEvents().add(event);</span>

<span class="fc" id="L336">		Origin oldOrigin = getPreferredOrigin(oldEvent);</span>
<span class="pc bpc" id="L337" title="1 of 2 branches missed.">		if (oldOrigin == null) {</span>
<span class="nc" id="L338">			return null;</span>
		}
<span class="fc" id="L340">		Origin origin = shallowClone(oldOrigin);</span>
<span class="fc" id="L341">		event.getOrigins().add(origin);</span>
<span class="fc" id="L342">		event.setPreferredOriginID(origin.getPublicID());</span>

<span class="fc" id="L344">		Magnitude oldMagnitude = getPreferredMagnitude(oldEvent);</span>
<span class="pc bpc" id="L345" title="1 of 2 branches missed.">		if (oldMagnitude != null) {</span>
			// magnitude is not required for origin
<span class="nc" id="L347">			Magnitude magnitude = shallowClone(oldMagnitude);</span>
<span class="nc" id="L348">			event.getMagnitudes().add(magnitude);</span>
<span class="nc" id="L349">			event.setPreferredMagnitudeID(magnitude.getPublicID());</span>
		}

<span class="fc" id="L352">		return quakeml;</span>
	}

	/**
	 * Extract a focalMechanism, triggering origin, derived origin, and derived
	 * magnitude from the first event in a quakeml message.
	 * 
	 * @param q
	 *            the quakeml message with a focalMechanism
	 * @param focalMechanismId
	 *            the focalMechanism to extract.
	 * @return a new Quakeml object.
	 */
	public static Quakeml getLightweightFocalMechanism(final Quakeml q,
			final String focalMechanismId) {
<span class="nc" id="L367">		Quakeml quakeml = new Quakeml();</span>

<span class="nc" id="L369">		EventParameters oldEventParameters = q.getEventParameters();</span>
<span class="nc" id="L370">		EventParameters eventParameters = shallowClone(oldEventParameters);</span>
<span class="nc" id="L371">		quakeml.setEventParameters(eventParameters);</span>

<span class="nc" id="L373">		Event oldEvent = q.getEventParameters().getEvents().get(0);</span>
<span class="nc" id="L374">		Event event = shallowClone(oldEvent);</span>
<span class="nc" id="L375">		eventParameters.getEvents().add(event);</span>

<span class="nc" id="L377">		FocalMechanism oldMech = getFocalMechanism(oldEvent, focalMechanismId);</span>
<span class="nc" id="L378">		event.getFocalMechanisms().add(shallowClone(oldMech));</span>

		// add triggering origin
<span class="nc" id="L381">		Origin triggeringOrigin = getOrigin(oldEvent,</span>
<span class="nc" id="L382">				oldMech.getTriggeringOriginID());</span>
<span class="nc bnc" id="L383" title="All 2 branches missed.">		if (triggeringOrigin != null) {</span>
<span class="nc" id="L384">			event.getOrigins().add(shallowClone(triggeringOrigin));</span>
		}

		// pull in derived origin and magnitude if present
<span class="nc" id="L388">		MomentTensor tensor = oldMech.getMomentTensor();</span>
<span class="nc bnc" id="L389" title="All 2 branches missed.">		if (tensor != null) {</span>
<span class="nc" id="L390">			Origin derivedOrigin = getOrigin(oldEvent,</span>
<span class="nc" id="L391">					tensor.getDerivedOriginID());</span>
<span class="nc bnc" id="L392" title="All 2 branches missed.">			if (derivedOrigin != null) {</span>
<span class="nc" id="L393">				event.getOrigins().add(shallowClone(derivedOrigin));</span>
			}
<span class="nc" id="L395">			Magnitude momentMagnitude = getMagnitude(oldEvent,</span>
<span class="nc" id="L396">					tensor.getMomentMagnitudeID());</span>
<span class="nc bnc" id="L397" title="All 2 branches missed.">			if (momentMagnitude != null) {</span>
<span class="nc" id="L398">				event.getMagnitudes().add(shallowClone(momentMagnitude));</span>
			}
		}

<span class="nc" id="L402">		return quakeml;</span>
	}

	/**
	 * Create a copy of an event parameters object.
	 * 
	 * omits anies, events, and other attributes.
	 * 
	 * @param oldEventParameters
	 * @return a new EventParameters object.
	 */
	public static EventParameters shallowClone(
			final EventParameters oldEventParameters) {
<span class="fc" id="L415">		EventParameters eventParameters = new EventParameters();</span>
<span class="fc" id="L416">		eventParameters.getComments().addAll(oldEventParameters.getComments());</span>
<span class="fc" id="L417">		eventParameters.setCreationInfo(oldEventParameters.getCreationInfo());</span>
<span class="fc" id="L418">		eventParameters.setDescription(oldEventParameters.getDescription());</span>
<span class="fc" id="L419">		eventParameters.setPublicID(oldEventParameters.getPublicID());</span>
<span class="fc" id="L420">		return eventParameters;</span>
	}

	/**
	 * Create a copy of an event object.
	 * 
	 * omits amplitudes, anies, event descriptions, mechanisms, magnitudes,
	 * origins, other attributes, picks, preferred*ID, and station magnitudes.
	 * 
	 * @param oldEvent
	 * @return a new Event object.
	 */
	public static Event shallowClone(final Event oldEvent) {
<span class="fc" id="L433">		Event event = new Event();</span>
<span class="fc" id="L434">		event.getComments().addAll(oldEvent.getComments());</span>
<span class="fc" id="L435">		event.setCreationInfo(oldEvent.getCreationInfo());</span>
<span class="fc" id="L436">		event.setDataid(oldEvent.getDataid());</span>
<span class="fc" id="L437">		event.setDatasource(oldEvent.getDatasource());</span>
<span class="fc" id="L438">		event.setEventid(oldEvent.getEventid());</span>
<span class="fc" id="L439">		event.setEventsource(oldEvent.getEventsource());</span>
<span class="fc" id="L440">		event.setPublicID(oldEvent.getPublicID());</span>
<span class="fc" id="L441">		event.setType(oldEvent.getType());</span>
<span class="fc" id="L442">		event.setTypeCertainty(oldEvent.getTypeCertainty());</span>
<span class="fc" id="L443">		return event;</span>
	}

	/**
	 * Create a copy of an origin object.
	 * 
	 * omits anies, arrivals, and other attributes.
	 * 
	 * @param oldOrigin
	 * @return a new Origin object.
	 */
	public static Origin shallowClone(final Origin oldOrigin) {
<span class="fc" id="L455">		Origin origin = new Origin();</span>
<span class="fc" id="L456">		origin.getComments().addAll(oldOrigin.getComments());</span>
<span class="fc" id="L457">		origin.getCompositeTimes().addAll(oldOrigin.getCompositeTimes());</span>
<span class="fc" id="L458">		origin.setCreationInfo(oldOrigin.getCreationInfo());</span>
<span class="fc" id="L459">		origin.setDataid(oldOrigin.getDataid());</span>
<span class="fc" id="L460">		origin.setDatasource(oldOrigin.getDatasource());</span>
<span class="fc" id="L461">		origin.setDepth(oldOrigin.getDepth());</span>
<span class="fc" id="L462">		origin.setDepthType(oldOrigin.getDepthType());</span>
<span class="fc" id="L463">		origin.setEarthModelID(oldOrigin.getEarthModelID());</span>
<span class="fc" id="L464">		origin.setEpicenterFixed(oldOrigin.getEpicenterFixed());</span>
<span class="fc" id="L465">		origin.setEvaluationMode(oldOrigin.getEvaluationMode());</span>
<span class="fc" id="L466">		origin.setEvaluationStatus(oldOrigin.getEvaluationStatus());</span>
<span class="fc" id="L467">		origin.setEventid(oldOrigin.getEventid());</span>
<span class="fc" id="L468">		origin.setEventsource(oldOrigin.getEventsource());</span>
<span class="fc" id="L469">		origin.setLatitude(oldOrigin.getLatitude());</span>
<span class="fc" id="L470">		origin.setLongitude(oldOrigin.getLongitude());</span>
<span class="fc" id="L471">		origin.setMethodID(oldOrigin.getMethodID());</span>
<span class="fc" id="L472">		origin.setOriginUncertainty(oldOrigin.getOriginUncertainty());</span>
<span class="fc" id="L473">		origin.setPublicID(oldOrigin.getPublicID());</span>
<span class="fc" id="L474">		origin.setQuality(oldOrigin.getQuality());</span>
<span class="fc" id="L475">		origin.setReferenceSystemID(oldOrigin.getReferenceSystemID());</span>
<span class="fc" id="L476">		origin.setRegion(oldOrigin.getRegion());</span>
<span class="fc" id="L477">		origin.setTime(oldOrigin.getTime());</span>
<span class="fc" id="L478">		origin.setTimeFixed(oldOrigin.getTimeFixed());</span>
<span class="fc" id="L479">		origin.setType(oldOrigin.getType());</span>
<span class="fc" id="L480">		return origin;</span>
	}

	/**
	 * Create a copy of a magnitude object.
	 * 
	 * omits anies, other attributes, and station magnitude contributions.
	 * 
	 * @param oldMagnitude
	 * @return a new Magnitude object.
	 */
	public static Magnitude shallowClone(final Magnitude oldMagnitude) {
<span class="nc" id="L492">		Magnitude magnitude = new Magnitude();</span>
<span class="nc" id="L493">		magnitude.setAzimuthalGap(oldMagnitude.getAzimuthalGap());</span>
<span class="nc" id="L494">		magnitude.getComments().addAll(oldMagnitude.getComments());</span>
<span class="nc" id="L495">		magnitude.setCreationInfo(getCreationInfo(oldMagnitude</span>
<span class="nc" id="L496">				.getCreationInfo()));</span>
<span class="nc" id="L497">		magnitude.setDataid(oldMagnitude.getDataid());</span>
<span class="nc" id="L498">		magnitude.setDatasource(oldMagnitude.getDatasource());</span>
<span class="nc" id="L499">		magnitude.setEvaluationMode(oldMagnitude.getEvaluationMode());</span>
<span class="nc" id="L500">		magnitude.setEvaluationStatus(oldMagnitude.getEvaluationStatus());</span>
<span class="nc" id="L501">		magnitude.setEventid(oldMagnitude.getEventid());</span>
<span class="nc" id="L502">		magnitude.setEventsource(oldMagnitude.getEventsource());</span>
<span class="nc" id="L503">		magnitude.setMag(oldMagnitude.getMag());</span>
<span class="nc" id="L504">		magnitude.setMethodID(oldMagnitude.getMethodID());</span>
<span class="nc" id="L505">		magnitude.setOriginID(oldMagnitude.getOriginID());</span>
<span class="nc" id="L506">		magnitude.setPublicID(oldMagnitude.getPublicID());</span>
<span class="nc" id="L507">		magnitude.setStationCount(oldMagnitude.getStationCount());</span>
<span class="nc" id="L508">		magnitude.setType(oldMagnitude.getType());</span>
<span class="nc" id="L509">		return magnitude;</span>
	}

	/**
	 * Create a copy of a focal mechanism object.
	 * 
	 * omits anies, other attributes.
	 * 
	 * @param oldMech
	 * @return a new FocalMechanism object.
	 */
	public static FocalMechanism shallowClone(final FocalMechanism oldMech) {
<span class="nc" id="L521">		FocalMechanism mech = new FocalMechanism();</span>
<span class="nc" id="L522">		mech.setAzimuthalGap(oldMech.getAzimuthalGap());</span>
<span class="nc" id="L523">		mech.getComments().addAll(oldMech.getComments());</span>
<span class="nc" id="L524">		mech.setCreationInfo(oldMech.getCreationInfo());</span>
<span class="nc" id="L525">		mech.setDataid(oldMech.getDataid());</span>
<span class="nc" id="L526">		mech.setDatasource(oldMech.getDatasource());</span>
<span class="nc" id="L527">		mech.setEvaluationMode(oldMech.getEvaluationMode());</span>
<span class="nc" id="L528">		mech.setEvaluationStatus(oldMech.getEvaluationStatus());</span>
<span class="nc" id="L529">		mech.setEventid(oldMech.getEventid());</span>
<span class="nc" id="L530">		mech.setEventsource(oldMech.getEventsource());</span>
<span class="nc" id="L531">		mech.setMethodID(oldMech.getMethodID());</span>
<span class="nc" id="L532">		mech.setMisfit(oldMech.getMisfit());</span>
<span class="nc" id="L533">		mech.setMomentTensor(oldMech.getMomentTensor());</span>
<span class="nc" id="L534">		mech.setNodalPlanes(oldMech.getNodalPlanes());</span>
<span class="nc" id="L535">		mech.setPrincipalAxes(oldMech.getPrincipalAxes());</span>
<span class="nc" id="L536">		mech.setPublicID(oldMech.getPublicID());</span>
<span class="nc" id="L537">		mech.setStationDistributionRatio(oldMech.getStationDistributionRatio());</span>
<span class="nc" id="L538">		mech.setStationPolarityCount(oldMech.getStationPolarityCount());</span>
<span class="nc" id="L539">		mech.setTriggeringOriginID(oldMech.getTriggeringOriginID());</span>
<span class="nc" id="L540">		mech.getWaveformIDs().addAll(oldMech.getWaveformIDs());</span>
<span class="nc" id="L541">		return mech;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.1.201803210924</span></div></body></html>